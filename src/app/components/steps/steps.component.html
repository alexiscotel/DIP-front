<app-layout actionAlign="end">
	<div class="header">
		<h2>Steps</h2>
	</div>
	<div class="body" *ngIf="fileContent">

		<mat-tree #mytree class="tree" [dataSource]="dataSource" [treeControl]="treeControl">
			<mat-tree-node *matTreeNodeDef="let childNode" matTreeNodeToggle>
				<!-- <p>{{childNode.name}} -> {{childNode.status}}</p> -->
				<app-step-status [status]="childNode.status">{{childNode.name}}</app-step-status>
			</mat-tree-node>
			<mat-nested-tree-node *matTreeNodeDef="let parentNode; when: hasChild">
				<div class="mat-tree-node">
					<button mat-icon-button matTreeNodeToggle [attr.aria-label]="'Toggle ' + parentNode.name">
						<mat-icon class="mat-icon-rtl-mirror">
							{{treeControl.isExpanded(parentNode) ? 'expand_more' : 'chevron_right'}} 
						</mat-icon>
					</button>

					<!-- <p>{{parentNode.name}} - {{parentNode.status}}</p> -->
					<app-step-status [status]="parentNode.status">{{parentNode.name}}</app-step-status>
				</div>
				<div [class.tree-invisible]="!treeControl.isExpanded(parentNode)" role="group">
					<ng-container matTreeNodeOutlet></ng-container>
				</div>
			</mat-nested-tree-node>
		</mat-tree>

	</div>
	<div class="actions">
		<button mat-button color="primary" [disabled]="isLoading" (click)="clearStatus()">Clear</button>
	</div>
	<div class="footer">
		<mat-progress-bar mode="indeterminate" *ngIf="isLoading"></mat-progress-bar>
	</div>
</app-layout>